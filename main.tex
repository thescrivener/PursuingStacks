%% Anti-Copyright 2015 - the scrivener

\RequirePackage{pdf14}
\documentclass[10pt,leqno,\OPTonetwo,openright]{memoir}
\usepackage{microtype}
\usepackage{mempatch}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[sfscaled=false,ttscaled=false,charter]{mathdesign} % MathDesign w Bitstream Charter
% \usepackage[mathscr]{eucal} % Zapf's Euler script letters
% in fact, we need to scale it down a bit to match mathdesign
\DeclareFontFamily{U}{pseus}{\skewchar\font'60}
\DeclareFontShape{U}{pseus}{m}{n}{%
     <-6> s * [0.95] eusm5%
    <6-8> s * [0.95] eusm7%
    <8-> s * [0.95] eusm10%
}{}
\DeclareFontShape{U}{pseus}{b}{n}{%
     <-6> s * [0.95] eusb5%
    <6-8> s * [0.95] eusb7%
    <8-> s * [0.95] eusb10%
}{}
\DeclareMathAlphabet\EuScript{U}{pseus}{m}{n}
\SetMathAlphabet\EuScript{bold}{U}{pseus}{b}{n}
\renewcommand{\mathscr}{\EuScript}
\DeclareSymbolFont{eulersymbols}  {U}{zeuex}{m}{n}
\DeclareMathSymbol{\euinfty}{\mathord}{eulersymbols}{153}

\makeatletter
\def\fvm@ratio{0.9}%
\def\fvs@ratio{0.9}%
\def\fve@ratio{0.9}%
\input{mdsffont.def}
\input{mdttfont.def}
\makeatother
\usepackage{mathtools}
\let\proof\relax
\let\endproof\relax
\usepackage{amsthm}
\usepackage{thmtools}
\usepackage{stmaryrd}
\mathtoolsset{centercolon,mathic}
\PassOptionsToPackage{dvipsnames,svgnames}{xcolor}
\usepackage{tikz-cd}
\usepackage[style=authoryear-comp,maxnames=10,backend=biber,%
            hyperref=true]{biblatex}
\usepackage{enumitem}
\usepackage{stackengine}
\setstackEOL{\\}

\usetikzlibrary{decorations.pathreplacing}
\pgfdeclarearrow{
  name = mdbchto,
  setup code = {
    % The different end values:
    \pgfarrowssettipend{1.5\pgflinewidth}
    \pgfarrowssetbackend{-2.55\pgflinewidth}
    \pgfarrowssetlineend{-.25\pgflinewidth}
    \pgfarrowssetvisualbackend{-.27437\pgflinewidth}
    % The hull
    \pgfarrowsupperhullpoint{1.5\pgflinewidth}{0.25\pgflinewidth}
    \pgfarrowsupperhullpoint{-1.88\pgflinewidth}{3.05\pgflinewidth}
    \pgfarrowsupperhullpoint{-2.55\pgflinewidth}{2.31\pgflinewidth}
    % No saves
  },
  drawing code = {
    \pgfsetdash{}{0pt}%
    \pgfpathmoveto{\pgfpoint{1.5\pgflinewidth}{0.25\pgflinewidth}}%
    \pgfpathlineto{\pgfpoint{-1.88\pgflinewidth}{3.05\pgflinewidth}}%
    \pgfpathlineto{\pgfpoint{-2.55\pgflinewidth}{2.31\pgflinewidth}}%
    \pgfpathlineto{\pgfpoint{-0.5\pgflinewidth}{0.5\pgflinewidth}}%
    \pgfpatharctoprecomputed%
      {\pgfpoint{-.94118\pgflinewidth}{0\pgflinewidth}}% center
      {48.576}% start angle
      {-48.576}% end angle
      {\pgfpoint{-0.5\pgflinewidth}{-0.5\pgflinewidth}}% end point
      {.66681\pgflinewidth}{.66681\pgflinewidth}{1}{1}% radius
    \pgfpathlineto{\pgfpoint{-2.55\pgflinewidth}{-2.31\pgflinewidth}}%
    \pgfpathlineto{\pgfpoint{-1.88\pgflinewidth}{-3.05\pgflinewidth}}%
    \pgfpathlineto{\pgfpoint{1.5\pgflinewidth}{-0.25\pgflinewidth}}%
    \pgfpathclose%
    \pgfusepathqfill
  }
}
\pgfdeclarearrow{
  name = mdbchbar,
  setup code = {
    \pgfarrowssettipend{0.5\pgflinewidth}
    \pgfarrowssetbackend{-0.5\pgflinewidth}
    \pgfarrowsupperhullpoint{0.5\pgflinewidth}{2.0345\pgflinewidth}
    \pgfarrowsupperhullpoint{-0.5\pgflinewidth}{2.0345\pgflinewidth}
  },
  drawing code = {
    \pgfsetdash{}{0pt}%
    \pgfpathmoveto{\pgfpoint{0.5\pgflinewidth}{2.0345\pgflinewidth}}%
    \pgfpathlineto{\pgfpoint{-0.5\pgflinewidth}{2.0345\pgflinewidth}}%
    \pgfpathlineto{\pgfpoint{-0.5\pgflinewidth}{-2.0345\pgflinewidth}}%
    \pgfpathlineto{\pgfpoint{0.5\pgflinewidth}{-2.0345\pgflinewidth}}%
    \pgfpathclose%
    \pgfusepathqfill
  }
}
\makeatletter
\pgfdeclarearrow{
  name = implies,
  setup code = {
    \pgfmathsetlength{\pgfutil@tempdimb}{.5\pgflinewidth-.5*\pgfinnerlinewidth}%
    \pgfarrowssettipend{1.5\pgfutil@tempdimb}
    \pgfarrowssetbackend{-4.948\pgfutil@tempdimb}
    \pgfarrowssetlineend{0.0\pgflinewidth}
    \pgfarrowssetvisualbackend{0.0\pgflinewidth}
    % The hull
    \pgfarrowsupperhullpoint{1.5\pgfutil@tempdimb}{0.25862\pgfutil@tempdimb}
    \pgfarrowsupperhullpoint{-4.2931\pgfutil@tempdimb}{4.9138\pgfutil@tempdimb}
    \pgfarrowsupperhullpoint{-4.948\pgfutil@tempdimb}{4.155\pgfutil@tempdimb}
    % No saves
  },
  drawing code = {
    \pgfsetdash{}{0pt}%
    \pgfmathsetlength{\pgfutil@tempdimb}{.5\pgflinewidth-.5*\pgfinnerlinewidth}%
    \pgfsetdash{}{0pt}%
    \pgfpathmoveto{\pgfpoint{1.5\pgfutil@tempdimb}{.25862\pgfutil@tempdimb}}%
    \pgfpathlineto{\pgfpoint{-4.2931\pgfutil@tempdimb}{4.9138\pgfutil@tempdimb}}%
    \pgfpathlineto{\pgfpoint{-4.948\pgfutil@tempdimb}{4.155\pgfutil@tempdimb}}%
    \pgfpathlineto{\pgfpoint{0\pgfutil@tempdimb}{0\pgfutil@tempdimb}}%
    \pgfpathlineto{\pgfpoint{-4.948\pgfutil@tempdimb}{-4.155\pgfutil@tempdimb}}%
    \pgfpathlineto{\pgfpoint{-4.2931\pgfutil@tempdimb}{-4.9138\pgfutil@tempdimb}}%
    \pgfpathlineto{\pgfpoint{1.5\pgfutil@tempdimb}{-.25862\pgfutil@tempdimb}}%
    \pgfpathclose%
    \pgfusepathqfill%
    \pgfsetfillcolor{white}%
    \pgfpathmoveto{\pgfpoint{1.5\pgfutil@tempdimb}{.25862\pgfutil@tempdimb}}%
    \pgfpathlineto{\pgfpoint{1.5\pgfutil@tempdimb}{4.9138\pgfutil@tempdimb}}%
    \pgfpathlineto{\pgfpoint{-4.2931\pgfutil@tempdimb}{4.9138\pgfutil@tempdimb}}%
    \pgfpathclose%
    \pgfusepathqfill%
    \pgfsetfillcolor{white}%
    \pgfpathmoveto{\pgfpoint{-4.2931\pgfutil@tempdimb}{-4.9138\pgfutil@tempdimb}}%
    \pgfpathlineto{\pgfpoint{1.5\pgfutil@tempdimb}{-4.9138\pgfutil@tempdimb}}%
    \pgfpathlineto{\pgfpoint{1.5\pgfutil@tempdimb}{-.25862\pgfutil@tempdimb}}%
    \pgfpathclose%
    \pgfusepathqfill
  }
}
\makeatother

\tikzset{>=mdbchto}
\tikzset{every picture/.style={line width=0.58pt}}
\tikzcdset{arrow style=tikz,%
  tikzcd implies/.tip={implies},%
  invisible/.style={/tikz/draw=none}}

\usepackage{hyperxmp}
\PassOptionsToPackage{hyphens}{url}
\usepackage[pdfa,hidelinks]{hyperref}

\hypersetup{% 
  pdftitle={Pursuing Stacks},
  pdfauthor={Alexander Grothendieck},
  pdflang={en},
  bookmarksopen=true,
  bookmarksopenlevel=0,
  bookmarksnumbered=true,
  hypertexnames=false,
  linktocpage=true,
  plainpages=false,
  colorlinks,
  citecolor=DarkGreen,
  linkcolor=DarkBlue,
  urlcolor=DarkGreen,
  breaklinks
}
\pdfadjustspacing=1
\brokenpenalty=10000 %%% No hyphenation across page breaks
\synctex=1

%%% Bibliography
\DeclareFieldFormat{eprint:mr}{%
  \mkbibacro{MR}\addcolon\space
  \ifhyperref
    {\href{http://www.ams.org/mathscinet-getitem?mr=#1}{\nolinkurl{#1}}}
    {\nolinkurl{#1}}}
\DeclareFieldFormat{eprint:eudml}{%
  \mkbibacro{EUDML}\addcolon\space
  \ifhyperref
    {\href{https://eudml.org/doc/#1}{\nolinkurl{#1}}}
    {\nolinkurl{#1}}}
\DeclareFieldFormat{eprint:euclid}{%
  Project Euclid\addcolon\space
  \ifhyperref
    {\href{http://projecteuclid.org/euclid.lnl/#1}{\nolinkurl{#1}}}
    {\nolinkurl{#1}}}

\addbibresource{ps.bib}

%%% Lists
\renewcommand*{\descriptionlabel}[1]{\hspace\labelsep\normalfont #1}
\SetLabelAlign{parright}{\parbox[t]{\labelwidth}{\raggedleft#1}}
\SetLabelAlign{pushright}{\makebox[{\ifdim\labelwidth<\width\width\else\labelwidth\fi}]%
  {\noindent\raggedleft\hfill #1}}
\setlist[description]{style=sameline,font=\normalfont,leftmargin=2.5em,align=pushright}
\firmlists

%%% Theorem-like environments
%% unnumbered ones are common
%% and numbered ones are not unique so we cannot use counters
\declaretheorem[numbered=no]{theorem}
\declaretheorem[numberwithin=section,name=Theorem]{theoremnum}
\renewcommand*{\thetheoremnum}{\arabic{theoremnum}}
\declaretheorem[numbered=no]{lemma}
\declaretheorem[numberwithin=section,name=Lemma]{lemmanum}
\renewcommand*{\thelemmanum}{\arabic{lemmanum}}
\declaretheorem[numbered=no]{proposition}
\declaretheorem[numberwithin=section,name=Proposition]{propositionnum}
\renewcommand*{\thepropositionnum}{\arabic{propositionnum}}
\declaretheorem[numbered=no]{observation}
\declaretheorem[numbered=no]{corollary}
\declaretheorem[numberwithin=section,name=Corollary]{corollarynum}
\renewcommand*{\thecorollarynum}{\arabic{corollarynum}}
\declaretheorem[numbered=no,style=definition]{definition}
\declaretheorem[numberwithin=section,style=definition,name=Definition]{definitionnum}
\renewcommand*{\thedefinitionnum}{\arabic{definitionnum}}
\declaretheorem[numbered=no,style=definition]{example}
\declaretheorem[numbered=no,style=definition]{remark}
\declaretheorem[numberwithin=section,style=definition,name=Remark]{remarknum}
\renewcommand*{\theremarknum}{\arabic{remarknum}}
\declaretheorem[numbered=no,style=definition]{remarks}
\declaretheorem[numberwithin=section,style=definition,name=Remarks]{remarksnum}
\renewcommand*{\theremarksnum}{\arabic{remarksnum}}
\declaretheorem[numbered=no,style=definition]{question}
\declaretheorem[numberwithin=section,style=definition,name=Question]{questionnum}
\renewcommand*{\thequestionnum}{\arabic{questionnum}}
\declaretheorem[numbered=no,style=definition]{comments}
\ignoretheorems{definition,definitionnum,example,examples,%
  remark,remarks,remarknum,remarksnum,%
  question,questionnum,comments}
%% these have special names
\declaretheorem[numbered=no,name=Homotopy lemma]{homotopylemma}
\declaretheorem[numbered=no,name=Homotopy lemma reformulated]{homotopylemmareformulated}
\declaretheorem[numbered=no,name=Comparison lemma for homotopy intervals]{comparisonlemmaforHI}
\declaretheorem[numbered=no,name=``Scholie'']{scholie}
%% no qed symbol after proofs
\renewcommand{\qedsymbol}{}

%%% Space after period
\DeclareMathSymbol{.}{\mathpunct}{letters}{"3A}
\DeclareMathSymbol{\decimalperiod}{\mathord}{letters}{"3A}

%%% Charter has thicker lines!
\setlength{\normalrulethickness}{0.58pt}

%%% Title page
\newcommand{\thetitlepage}{{%
  \thispagestyle{empty}
  \calccentering{\unitlength}
  \begin{adjustwidth*}{\unitlength}{-\unitlength}
    \centering
    {\huge \textls[250]{PURSUING STACKS}}\par
    \vspace{\baselineskip}
    {\Large (\kern1pt\emph{À la poursuite des Champs})}\par
    \vspace{5\baselineskip}
    First episode:\par
    \vspace{\baselineskip}
    {\large \textls[200]{THE MODELIZING STORY}}\par
    \vspace{\baselineskip}
    (\kern0.4pt\emph{histoire de modèles})\par
    \vspace{5\baselineskip}
    by
    \vspace{5\baselineskip}
    {\Large Alexander Grothendieck}\par
    \vspace{\baselineskip}
    1983\par
  \end{adjustwidth*}
  \vfill\clearpage}}

%%% Copyright page
\newcommand{\thecopyrightpage}{{%
  \raggedright
  Pursuing Stacks (À la poursuite des Champs)\par
  First episode: The modelizing story (histoire de modèles)\par
  by Alexander Grothendieck (* March 28, 1918 in Berlin; \textdagger{}
  November 13, 2014 Lasserre, Ariège)\par
  \vspace*{\baselineskip}\par
  \noindent Original typescript written 1983\par
  \vspace*{\baselineskip}\par
  \noindent This 2015 edition (including all source files) by
  \emph{the scrivener} is in the public domain.\par
  \vspace*{5\baselineskip}\par
  Typeset with \LaTeX{} and the fabulous \emph{memoir} class.
  Composed with Bitstream Charter for the text type and Paul
  Pichaureau's \texttt{mathdesign} package for the math type. All
  diagrams and illustrations were made with Till Tantau's Ti{\itshape
    k}Z (Ti{\itshape k}Z ist \emph{kein} Zeichenprogramm) and the
  \texttt{tikz-cd} package.\par
  \clearpage}}

%%% Table of contents
\renewcommand{\cftchapterleader}{}
\renewcommand{\cftchapterafterpnum}{\cftparfillskip}
\renewcommand{\cftsectionleader}{}
\renewcommand{\cftsectionafterpnum}{\cftparfillskip}
\renewcommand{\cftsubsectionleader}{}
\renewcommand{\cftsubsectionafterpnum}{\cftparfillskip}
\setrmarg{0pt plus 1fil}
\setlength{\cftsectionnumwidth}{3em}
\setlength{\cftsubsectionnumwidth}{2em}
\setlength{\cftsubsectionindent}{5em}
\setpnumwidth{2.55em}

%%% Layout
\OPTstockformat
\OPTpageformat
\settypeblocksize{*}{24.5pc}{*}
\setlrmargins{1in}{*}{*}
\setulmarginsandblock{1in}{2in}{*}
\setheadfoot{\baselineskip}{2\baselineskip}
\setheaderspaces{*}{2\baselineskip}{*}
\setmarginnotes{2pc}{12pc}{\baselineskip}
\checkandfixthelayout
\raggedbottom
\setlength{\parindent}{1em}

%%% Marginal revolution
\footnotesinmargin
\renewcommand*{\thefootnote}{\fnsymbol{footnote}}
\sideparmargin{right}
\setlength{\footmarkwidth}{-1sp}
\setlength{\footmarksep}{0pt}
\renewcommand{\foottextfont}{\footnotesize\raggedright}
\newlength{\extrawidth}
\setlength{\extrawidth}{\marginparsep}
\addtolength{\extrawidth}{\marginparwidth}
\newenvironment{widematter}{\begin{adjustwidth*}{0mm}{-\extrawidth}}%
  {\end{adjustwidth*}}

%%% Headers
\setlength{\headwidth}{\textwidth}
\addtolength{\headwidth}{\marginparsep}
\addtolength{\headwidth}{\marginparwidth}
\addtopsmarks{companion}{}{
  \createmark{chapter}{both}{shownumber}{}{\enspace}
  \createmark{section}{right}{shownumber}{\S}{}
}
\pagestyle{companion}
\renewcommand*{\chaptername}{Part}

%%% Sectioning
\renewcommand{\thechapter}{\Roman{chapter}}
\strictpagecheck
\newcounter{mastersection} %to account for section 16bis
\hangsecnum
\counterwithout{section}{chapter}
\makeatletter
\@addtoreset{section}{mastersection}
\newcommand*{\kernifitalic}[1]{%
  \ifx\f@shape\my@test@it
    \kern#1
  \else\relax\fi
}
\newcommand*{\my@test@it}{it}
\def\hangsection{\@dblarg\@hangsection}
\def\@hangsection[#1]#2{%
  \leavevmode\par\needspace{3\baselineskip}\everypar{}\noindent%
  \setcounter{footnote}{0}%
  \refstepcounter{section}%
  \llap{\normalfont\bfseries\large\thesection\quad}%
  \phantomsection%
  \markright{\memUChead{\S\thesection\enspace #1}}%
  \addcontentsline{toc}{section}{\numberline{\thesection}#2}%
  \checkoddpage%
  \marginpar{\if@twoside\ifoddpage\relax\else{$\phantom{1}$\\}\fi\fi\itshape #2}%
  \ignorespaces%
}
\def\presectionfill{\noindent\needspace{8\baselineskip}\hfill}
\makeatother

% from: http://tex.stackexchange.com/questions/8486/changing-the-section-number-to-a-fraction
\newcommand{\DontChangeNextSectionNumber}{%
  % we save the old section number and substract one (\section does +1)
  \edef\sectioncountervalue{\numexpr\the\value{section}-1\relax}%
  % we increment the master counter
  \refstepcounter{mastersection}%
  % we set the section counter to the saved value
  \setcounter{section}{\sectioncountervalue}%
}
\setaftersubsecskip{-1em}
\maxsecnumdepth{subsection}

%%% Named labels
\makeatletter
\def\namedlabel#1#2{\begingroup
  #2%
  \def\@currentlabel{#2}%
  \phantomsection\label{#1}\endgroup
}
\def\phantomlabel#1#2{\begingroup
  \def\@currentlabel{#2}%
  \phantomsection\label{#1}\endgroup
}
\makeatother

%%% Original page numbers and scrivener's comments in margin
\makeatletter
\newcommand{\namedpspage}[2]{%
  \phantomlabel{p:#1}{#2}%
  \checkoddpage%
  \marginpar{%
    \if@twoside\ifoddpage\relax\else\noindent\hfill\fi\fi%
    [p.\ #2]}}
\makeatother
\newcommand{\pspage}[1]{\namedpspage{#1}{#1}}
\newcommand{\scrcomment}[1]{\marginpar{\color{DarkRed}{[#1]}}}
\newcommand{\scrcommentinline}[1]{%
  {\color{DarkRed}{[#1]}}}
\newcommand{\ondate}[1]{\namedlabel{date:#1}{#1}}
\newcommand{\alsoondate}[1]{#1}

%%% Completion hat and its dual
\mathchardef\Hat="705E
\mathchardef\Vee="7014
\newcommand*{\uphat}{^{\vbox to 0.8ex{\hbox{\large$\Hat$}\vss}}}
\newcommand*{\adjuphat}{^{\vbox to 0.8ex{\hbox{\!\large$\Hat$}\vss}}}
\newcommand*{\upvee}{^{\vbox to 0.8ex{\hbox{\large$\Vee$}\vss}}}
%\newcommand*{\uphat}{\widehat{\phantom{,,}}}

%%% Lowered widetilde courtesy of
%%% https://tex.stackexchange.com/questions/3682/how-do-i-lower-the-widetilde-accent-i-e-move-it-closer-to-the-variable
\makeatletter
\newcommand*\wt[2][0.1ex]{%
        \begingroup
        \mathchoice{\wt@helper{#1}{#2}{\displaystyle}{\textfont}}
                   {\wt@helper{#1}{#2}{\textstyle}{\textfont}}
                   {\wt@helper{#1}{#2}{\scriptstyle}{\scriptfont}}
                   {\wt@helper{#1}{#2}{\scriptscriptstyle}{\scriptscriptfont}}%
        \endgroup
        #2%
}
\newcommand*\wt@helper[4]{%
        \def\currentfont{\the#41}%
        \def\currentskewchar{\char\the\skewchar\currentfont}%
        \setbox\tw@\hbox{\currentfont#2\currentskewchar}%
        \dimen@ii\wd\tw@
        \setbox\tw@\hbox{\currentfont#2{}\currentskewchar}%
        \advance\dimen@ii-\wd\tw@
        \rlap{\raisebox{-#1}{$\m@th#3\kern\dimen@ii\widetilde{\phantom{#2}}$}}%
}
\makeatother

%%% Macros
\newcommand*{\starsbreak}{\fancybreak{\raisebox{3pt}[18pt][6pt]*\kern1em
    *\kern1em\raisebox{3pt}*}}
\newcommand*{\preslice}[2]{\vphantom{#1}_{#2\backslash}{#1}} % left slicing
\newcommand*{\cst}[1]{\mathrm{#1}} % constants
\newcommand*{\bN}{{\ensuremath{\mathbb{N}}}}
\newcommand*{\bZ}{{\ensuremath{\mathbb{Z}}}}
\newcommand*{\bP}{{\ensuremath{\mathbb{P}}}}
\newcommand*{\bQ}{{\ensuremath{\mathbb{Q}}}}
\newcommand*{\bR}{{\ensuremath{\mathbb{R}}}}
\newcommand*{\bC}{{\ensuremath{\mathbb{C}}}}
\newcommand*{\bB}{{\ensuremath{\mathbb{B}}}}
\newcommand*{\bF}{{\ensuremath{\mathbb{F}}}}
\newcommand*{\bG}{{\ensuremath{\mathbb{G}}}}
\newcommand*{\bI}{{\ensuremath{\mathbb{I}}}}
\newcommand*{\bJ}{{\ensuremath{\mathbb{J}}}}
\newcommand*{\bK}{{\ensuremath{\mathbb{K}}}}
\newcommand*{\bL}{{\ensuremath{\mathbb{L}}}}
\newcommand*{\bM}{{\ensuremath{\mathbb{M}}}}
\newcommand*{\scrA}{{\ensuremath{\mathscr{A}}}}
\newcommand*{\scrAab}{{\ensuremath{\mathscr{A}\subab}}}
\newcommand*{\scrB}{{\ensuremath{\mathscr{B}}}}
\newcommand*{\scrC}{{\ensuremath{\mathscr{C}}}}
\newcommand*{\scrD}{{\ensuremath{\mathscr{D}}}}
\newcommand*{\scrE}{{\ensuremath{\mathscr{E}}}}
\newcommand*{\scrF}{{\ensuremath{\mathscr{F}}}}
\newcommand*{\scrH}{{\ensuremath{\mathscr{H}}}}
\newcommand*{\scrL}{{\ensuremath{\mathscr{L}}}}
\newcommand*{\scrM}{{\ensuremath{\mathscr{M}}}}
\newcommand*{\scrN}{{\ensuremath{\mathscr{N}}}}
\newcommand*{\scrO}{{\ensuremath{\mathscr{O}}}}
\newcommand*{\scrOX}{{\ensuremath{\mathscr{O}_{\mathscr X}}}}
\newcommand*{\scrOk}{{\ensuremath{\mathscr{O}_k}}}
\newcommand*{\scrP}{{\ensuremath{\mathscr{P}}}}
\newcommand*{\scrQ}{{\ensuremath{\mathscr{Q}}}}
\newcommand*{\scrU}{{\ensuremath{\mathscr{U}}}}
\newcommand*{\scrW}{{\ensuremath{\mathscr{W}}}}
\newcommand*{\scrWA}{{\ensuremath{\mathscr{W}_A}}}
\newcommand*{\scrWB}{{\ensuremath{\mathscr{W}_B}}}
\newcommand*{\scrWoo}{{\ensuremath{\mathscr{W}_\euinfty}}}
\newcommand*{\scrWz}{{\ensuremath{\mathscr{W}_0}}}
\newcommand*{\scrX}{{\ensuremath{\mathscr{X}}}}
\newcommand*{\Ahat}{{\ensuremath{A\uphat}}}
\newcommand*{\Ahatc}{{\ensuremath{A\uphat\subc}}}
\newcommand*{\Ahata}{{\ensuremath{A\uphat\suba}}}
\newcommand*{\Ahatas}{{\ensuremath{A\uphat\subas}}}
\newcommand*{\Ahatab}{{\ensuremath{A\uphat\subab}}}
\newcommand*{\AhatM}{{\ensuremath{A\uphat_\scrM}}}
\newcommand*{\AhatN}{{\ensuremath{A\uphat_\scrN}}}
\newcommand*{\Ahatk}{{\ensuremath{A\uphat_k}}}
\newcommand*{\Ahatfp}{{\ensuremath{A\uphat\subfp}}}
\newcommand*{\Ahattotas}{{\ensuremath{A\uphat_{\mathrm{tot.as}}}}}
\newcommand*{\Ahatlocas}{{\ensuremath{A\uphat_{\mathrm{loc.as}}}}}
\newcommand*{\Bhat}{{\ensuremath{B\uphat}}}
\newcommand*{\Bhatas}{{\ensuremath{B\uphat\subas}}}
\newcommand*{\Bhatab}{{\ensuremath{B\uphat\subab}}}
\newcommand*{\BhatM}{{\ensuremath{B\uphat_\scrM}}}
\newcommand*{\Bhatk}{{\ensuremath{B\uphat_k}}}
\newcommand*{\Bhatc}{{\ensuremath{B\uphat\subc}}}
\newcommand*{\Chat}{{\ensuremath{C\uphat}}}
\newcommand*{\PampM}{{\ensuremath{P\supamp_\scrM}}}
\newcommand*{\PampN}{{\ensuremath{P\supamp_\scrN}}}
\newcommand*{\Simplex}{{\text{\raisebox{-0.1ex}{\includegraphics[height=1.7ex]{simplex}}}}}
\newcommand*{\Square}{{\text{\raisebox{-0.1ex}{\includegraphics[height=1.5ex]{square}}}}}
\newcommand*{\Globe}{{\text{\raisebox{-0.2ex}{\includegraphics[height=1.8ex]{globe}}}}}
\newcommand*{\Simplexop}{{\ensuremath{\Simplex\!\op}}}
\newcommand*{\Simplexhat}{{\ensuremath{\Simplex\adjuphat}}}
\newcommand*{\Simplexhatab}{{\ensuremath{\Simplex\subab\adjuphat}}}
\newcommand*{\Simplextildehat}{{\ensuremath{\wt[0.2ex]{\Simplex}\adjuphat}}}
\newcommand*{\Simplexfhat}{{\ensuremath{{{\Simplex\!}^{\mathrm f}}\uphat}}}
\newcommand*{\sor}{\mathbin{\cup}}
\newcommand*{\sand}{\mathbin{\cap}}
\newcommand*{\suba}{_{\mathrm{a}}}
\newcommand*{\subm}{_{\mathrm{m}}}
\newcommand*{\subc}{_{\mathrm{c}}}
\newcommand*{\subd}{_{\mathrm{d}}} % dexter
\newcommand*{\subs}{_{\mathrm{s}}} % sinister
\newcommand*{\subab}{_{\mathrm{ab}}}
\newcommand*{\subas}{_{\mathrm{as}}}
\newcommand*{\subfp}{_{\mathrm{fp}}}
\newcommand*{\subpt}{_{\mathrm{pt}}}
\newcommand*{\supamp}{^{\&}}
\newcommand*{\supab}{^{\mathrm{ab}}}
\newcommand*{\supDP}{^{\mathrm{DP}}}
\newcommand*{\Ab}{{\ensuremath{(\mathrm{Ab})}}}
\newcommand*{\Hot}{{\ensuremath{(\mathrm{Hot})}}}
\newcommand*{\Hotab}{{\ensuremath{(\mathrm{Hotab})}}}
\newcommand*{\HotA}{{\ensuremath{(\mathrm{Hot}_A)}}}
\newcommand*{\HotB}{{\ensuremath{(\mathrm{Hot}_B)}}}
\newcommand*{\HotM}{{\ensuremath{(\mathrm{Hot}_M)}}}
\newcommand*{\HotW}{{\ensuremath{(\mathrm{Hot}_\scrW)}}}
\newcommand*{\HotAW}{{\ensuremath{(\mathrm{Hot}_A^\scrW)}}}
\newcommand*{\Hotz}{{\ensuremath{\mathrm{Hot}_0}}}
\newcommand*{\Hotabz}{{\ensuremath{\mathrm{Hotab}_0}}}
\newcommand*{\Sets}{{\ensuremath{(\mathrm{Sets})}}}
\newcommand*{\pSets}{{\ensuremath{(\mathrm{Sets}^\bullet)}}}
\newcommand*{\Gsets}{{\ensuremath{(G\textup{-sets})}}}
\newcommand*{\Sssets}{{\ensuremath{(\mathrm{Ss~sets})}}}
\newcommand*{\Spaces}{{\ensuremath{(\mathrm{Spaces})}}}
\newcommand*{\Ord}{{\ensuremath{(\mathrm{Ord})}}}
\newcommand*{\Preord}{{\ensuremath{(\mathrm{Preord})}}}
\newcommand*{\kMod}{{\ensuremath{(k\textup{-Mod})}}}
\newcommand*{\Rings}{{\ensuremath{(\mathrm{Rings})}}}
\newcommand*{\Cat}{{\ensuremath{(\mathrm{Cat})}}}
\newcommand*{\oCat}{{\ensuremath{\overline{\vphantom{W}\smash{(\mathrm{Cat})}}}}}
\newcommand*{\cTop}{{\ensuremath{(\mathrm{Top})}}}
\newcommand*{\Topoi}{{\ensuremath{(\mathrm{Topoi})}}}
\newcommand*{\Simplextilde}{{\ensuremath{\wt[0.2ex]{\Simplex}}}}
\newcommand*{\Simplexf}{{\ensuremath{\Simplex\!^{\mathrm{f}}}}}
\newcommand*{\smashSimplexf}{{\ensuremath{\smash{\Simplex\!^{\mathrm{f}}}}}}
\newcommand*{\Simplexprimef}{{\ensuremath{{\Simplex\!'}^{\mathrm{f}}}}}
\newcommand*{\Simplextildef}{{\ensuremath{\wt[0.2ex]{\Simplex}\!^{\mathrm{f}}}}}
\newcommand*{\iSimplexIntoCat}{{\ensuremath{i:\Simplex\hookrightarrow\Cat}}}
\newcommand*{\piz}{{\ensuremath{\pi_0}}}
\newcommand*{\bpi}{{\ensuremath{\boldsymbol\pi}}}
\newcommand*{\bpiz}{{\ensuremath{\boldsymbol\pi_0}}}
\newcommand*{\Isim}{\mathrel{\underset{\bI}{\sim}}}
\newcommand*{\Izsim}{\mathrel{\underset{\bI_0}{\sim}}}
\newcommand*{\Jsim}{\mathrel{\underset{\bJ}{\sim}}}
\newcommand*{\Ksim}{\mathrel{\underset{\bK}{\sim}}}
\newcommand*{\Wsim}{\mathrel{\underset{W}{\sim}}}
\newcommand*{\hsim}{\mathrel{\underset{h}{\sim}}}
\newcommand*{\Rsim}{\mathrel{\underset{R}{\sim}}}
\newcommand*{\nin}{\mathrel{\not\in}}
\newcommand*{\oo}{\ensuremath{\euinfty}}
\newcommand*{\epito}{\twoheadrightarrow}
\newcommand*{\monoto}{\rightarrowtail}
\newcommand*{\comcat}{\mathop{\downarrow}}
\newcommand*{\op}{^{\mathrm{op}}}
\newcommand*{\restr}{\ensuremath{\!\!\upharpoonright}}
\newcommand*{\restrto}{\ensuremath{\mathbin{\!\upharpoonright}}}
\newcommand*{\equ}{\mathrel{\approx}}
\newcommand*{\equeq}{\mathrel{\approxeq}}
\newcommand*{\tosim}{\xrightarrow{\raisebox{-2.5pt}[0pt][0pt]{$\scriptstyle\sim$}}}
\newcommand*{\fromsim}{\xleftarrow{\raisebox{-2.5pt}[0pt][0pt]{$\scriptstyle\sim$}}}
\newcommand*{\tosimeq}{\xrightarrow{\raisebox{-1.5pt}[0pt][0pt]{$\scriptstyle\simeq$}}}
\newcommand*{\toequ}{\xrightarrow{\raisebox{-1.5pt}[0pt][0pt]{$\scriptstyle\approx$}}}
\newcommand*{\fromequ}{\xleftarrow{\raisebox{-1.5pt}[0pt][0pt]{$\scriptstyle\approx$}}}
\newcommand*{\UW}{{\ensuremath{\mathrm UW}}}
\newcommand*{\GalQQ}{{\ensuremath{\mathrm{Gal}_{\overline{\bQ}/\bQ}}}}
\newcommand*{\Last}{\mathbin{\overset{\mathrm L}{*}}}
\newcommand*{\Loast}{\mathbin{\overset{\mathrm L}{\oast}}}
\newcommand*{\hatotimes}{\mathbin{\hat{\otimes}}}
\DeclareMathOperator{\Add}{Add}
\DeclareMathOperator{\Addinf}{Addinf}
\DeclareMathOperator{\Lim}{Lim}
\DeclareMathOperator{\Ker}{Ker}
\DeclareMathOperator{\Coker}{Coker}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Ext}{Ext}
\DeclareMathOperator{\bExt}{\mathbf{Ext}}
\DeclareMathOperator{\Tor}{Tor}
\DeclareMathOperator{\Spec}{Spec}
\DeclareMathOperator{\Qucoh}{Qucoh}
\DeclareMathOperator{\Bil}{Bil}
\DeclareMathOperator{\Kar}{Kar}
\DeclareMathOperator{\KarAdd}{KarAdd}
\DeclareMathOperator{\KarAddinf}{KarAddinf}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Homadd}{Homadd}
\DeclareMathOperator{\Homaddinf}{Homaddinf}
\DeclareMathOperator{\Homcont}{Homcont}
\DeclareMathOperator{\Maps}{Maps}
\DeclareMathOperator{\Mod}{Mod}
\DeclareMathOperator{\RHom}{RHom}
\DeclareMathOperator{\RGamma}{R\Gamma}
\DeclareMathOperator{\RH}{RH}
\DeclareMathOperator{\LH}{LH}
\DeclareMathOperator{\Lpi}{L\pi}
\DeclareMathOperator{\tH}{\widetilde H}
\DeclareMathOperator{\LtH}{L\widetilde H}
\DeclareMathOperator{\bBiadd}{\mathbf{Biadd}}
\DeclareMathOperator{\bHom}{\mathbf{Hom}}
\DeclareMathOperator{\RbHom}{R\mathbf{Hom}}
\DeclareMathOperator{\bHomex}{\mathbf{Homex}}
\DeclareMathOperator{\oHom}{\overline{Hom}}
\DeclareMathOperator{\bHomadd}{\mathbf{Homadd}}
\DeclareMathOperator{\bHomaddinf}{\mathbf{Homaddinf}}
\DeclareMathOperator{\bHomaddkar}{\mathbf{Homaddkar}}
\DeclareMathOperator{\bHomaddinfkar}{\mathbf{Homaddinfkar}}
\DeclareMathOperator{\bHommultinf}{\mathbf{Hommultinf}}
\DeclareMathOperator{\Asph}{Asph}
\DeclareMathOperator{\bAsph}{\mathbf{Asph}}
\DeclareMathOperator{\Int}{Int}
\DeclareMathOperator{\Lie}{Lie}
\DeclareMathOperator{\bInt}{\mathbf{Int}}
\DeclareMathOperator{\bEnd}{\mathbf{End}}
\DeclareMathOperator{\Crib}{Crib}
\DeclareMathOperator{\Comp}{Comp}
\DeclareMathOperator{\Homtp}{Homtp}
\DeclareMathOperator{\Cont}{Cont}
\DeclareMathOperator{\Contr}{Contr}
\DeclareMathOperator{\HotOf}{Hot}
\DeclareMathOperator{\HotabOf}{Hotab}
\DeclareMathOperator{\sKM}{sK\mathscr M}
\DeclareMathOperator{\AbOf}{Ab}
\DeclareMathOperator{\Alg}{Alg}
\DeclareMathOperator{\Aff}{Aff}
\DeclareMathOperator{\WAsph}{\mathscr{W}\mathrm{-Asph}}
\DeclareMathOperator{\WzAsph}{\mathscr{W}_0\mathrm{-Asph}}
\DeclareMathOperator{\WooAsph}{\mathscr{W}_\euinfty\mathrm{-Asph}}
\DeclareMathOperator{\WprimeAsph}{\mathscr{W}'\mathrm{-Asph}}
\newcommand*{\HotOfzc}{\ensuremath{\HotOf(0\textup{-}\mathrm{conn})}}
\newcommand*{\HotabOfzc}{\ensuremath{\HotabOf(0\textup{-}\mathrm{conn})}}
\newcommand*{\zc}{\ensuremath{(0\textup{-}\mathrm{conn})}}
\newcommand*{\D}{{\ensuremath{\mathrm{D}}}} % derived category
\newcommand*{\Lotimes}{\mathbin{\overset{\mathrm{L}}{\otimes}}} % derived tensor (aka Ext)
\newcommand*{\DP}{{\ensuremath{\mathrm{DP}}}} % Dold-Puppe
\newcommand*{\Ch}{{\ensuremath{\mathrm{Ch}}}} % chain complexes
\DeclareMathOperator{\Sd}{Sd}
\DeclareMathOperator{\Ex}{Ex}
\DeclareMathOperator{\Sh}{Sh}
\DeclareMathOperator{\Top}{Top}
\DeclareMathOperator{\Ob}{Ob}
\DeclareMathOperator{\Fl}{Fl}
\DeclareMathOperator{\bFl}{\mathbf{Fl}}
\DeclareMathOperator{\Pro}{Pro}
\DeclareMathOperator{\Proj}{Proj}
\DeclareMathOperator{\UlProj}{UlProj}
\DeclareMathOperator{\Id}{Id}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\Imm}{Im}
\DeclareMathOperator{\inv}{inv}
\DeclareMathOperator{\pr}{pr}
\DeclareMathOperator{\Sym}{Sym}
\DeclareMathOperator{\Symbin}{Symbin}
\DeclareMathOperator{\Wh}{Wh}
\DeclareMathOperator{\bWh}{\mathbf{Wh}}
\DeclareMathOperator{\forg}{forg}
\DeclarePairedDelimiter\abs{\lvert}{\rvert} % absolute value
\DeclarePairedDelimiter\angled{\langle}{\rangle} % angle brackets
\newcommand*{\pair}[2]{\angled{#1,#2}} % pairs
\DeclarePairedDelimiterX\set[2]{\{}{\}}
  {#1 \mathrel{}\mathclose{}\delimsize|\mathopen{}\mathrel{} #2}
\DeclarePairedDelimiter\denot{\llbracket}{\rrbracket}
\newcommand*{\eqdef}{\overset{\textup{def}}{=}}

\begin{document}

\frontmatter
\thetitlepage
\thecopyrightpage

\renewcommand*{\contentsname}{Short contents}
\setcounter{tocdepth}{0} % chapter level
\tableofcontents
\clearpage
\renewcommand*{\contentsname}{Contents}
\setcounter{tocdepth}{2} % subsection level
\tableofcontents

\bigskip
\noindent\hfill\ldots(to be completed)\par

\include{preface}

\mainmatter

\include{ps1}
\include{ps2}
\include{ps3}
\include{ps4}
\include{ps5}
\include{ps6}
\include{ps7}

\backmatter

\raggedright
\printbibliography

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
